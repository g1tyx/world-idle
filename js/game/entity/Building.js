define(["calculator/PriceCalculator"],function(t){var e=function(e){this.meta=e,this.amount=new BigNumber(this.meta.startingAmount?this.meta.startingAmount:0),this.workersPercentage=100,this.workerData=null,this.production=null,this.priceCalculators={}
for(var r in this.meta.price)this.priceCalculators[r]=new t(this.meta.price[r],this.meta.priceIncrease)}
return e.prototype.getMeta=function(){return this.meta},e.prototype.getAmount=function(){return this.amount},e.prototype.setWorkersPercentage=function(t){this.workersPercentage=Number(t),isNaN(this.amount)&&(this.workersPercentage=100)},e.prototype.getWorkersPercentage=function(){return this.workersPercentage},e.prototype.setAmount=function(t){this.amount=new BigNumber(t),isNaN(this.amount)&&(this.amount=0)},e.prototype.addAmount=function(t){this.amount=this.amount.add(t)},e.prototype.setWorkerData=function(t){this.workerData=t},e.prototype.getWorkerData=function(){return this.workerData},e.prototype.setResourceProduction=function(t){this.production=t},e.prototype.getResourceProduction=function(){return this.production},e.prototype.getPrice=function(t,e){var r={}
for(var o in this.meta.price)r[o]=this.priceCalculators[o].getPrice(this.amount,t)
for(var n in r)r[n]=r[n].divide(e.getMutation("buildingPrices").getBonus())
return r},e.prototype.getSaveData=function(){return[this.amount.toString(),this.workersPercentage]},e.prototype.updateFromSaveData=function(t){t&&(this.setAmount(t[0]),this.setWorkersPercentage(t[1]))},e})
